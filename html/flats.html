<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Usuario</title>
</head>
<body>
    <h1>Lista de flats</h1>
    <table border="1" id="tablaFlats">
        <thead>
            <tr>
                <th>Ciudad</th>
                <th>Direccion</th>
                <th>Numero de lote</th>
                <th>Area construcción</th>
                <th>Aire Acondicionado</th>
                <th>Precio Arrendamiento</th>
                <th>Fecha Disponibilidad</th>
            </tr>
        </thead>
        <tbody>
            <!-- Los datos se llenarán dinámicamente -->
        </tbody>
    </table>

    <h2>Editar Flats</h2>
    <form id="formularioEdicion" style="display: none;">

        <label class="letra" for="">Ciudad:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Ciudad" placeholder="Ingrese una ciudad"minlength="2" maxlength="20" autofocus required /> <br><br>
        
        <label class="letra" for="">Dirección:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Direccion" placeholder="Ingrese dirección" minlength="2" maxlength="25"/><br><br>
        
        <label class="letra" for="">Numeración domiciliaria:</label><br>
        <input class="inputs-medidas inputs" type="text" id="NumeracionBien" placeholder="Ingrese el número del bien" minlength="2" maxlength="10"/><br><br>
        
        <label class="letra" for="">Área Total:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Area" placeholder="Ingrese el área" minlength="2" maxlength="10"/><br><br>
        
        <label class="" for="aire"> Dispone de Aire Acondicionado ?</label> <br>
        <input  type="radio" id="Aire" name="aire" value="SI" /> SI
        <input type="radio" id="Aire" name="aire" value="NO" checked="" /> NO <br><br>
        
        <label class="letra" for="">Año de construcción:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Anio" placeholder="Ingrese el año de construcción"minlength="2" maxlength="10" /><br><br>
        
        <label class="letra" for="">Precio de arrendamiento:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Precio" placeholder="Ingrese el precio" minlength="2" maxlength="10"/><br><br>
        
        <label class="letra" for="">Disponibilidad de arriendo:</label><br>
        <input class="inputs-medidas inputs" type="date" name="edad" id="Disponible" required>
        <br>
        <br>
        
      
        
        <button type="button" onclick="guardarFla()">Guardar</button>
    </form>

    <script>
        // Recuperar datos de localStorage y mostrar en la tabla
        function cargarUsuarios() {
            const usuariosJSON = localStorage.getItem('usuariosGuardados');
            const usuarios = usuariosJSON ? JSON.parse(usuariosJSON) : [];

            const tabla = document.getElementById('tablaFlats').getElementsByTagName('tbody')[0];
            tabla.innerHTML = ''; // Limpiar tabla

            usuarios.forEach((flat, indice) => {
                const fila = tabla.insertRow();
                fila.insertCell(0).textContent = flat.nombre;
                fila.insertCell(1).textContent = flat.apellido;
                fila.insertCell(2).textContent = flat.correo;
                

                const botonEditar = document.createElement('button');
                botonEditar.textContent = 'Editar';
                botonEditar.onclick = () => editarFlat(indice);
                fila.insertCell(3).appendChild(botonEditar);
            });
        }

        // Mostrar formulario de edición con los datos del usuario seleccionado
        function editarFlat(indice) {
            const usuariosJSON = localStorage.getItem('usuariosGuardados');
            const usuarios = usuariosJSON ? JSON.parse(usuariosJSON) : [];
            const usuario = usuarios[indice];

            document.getElementById('indiceUsuario').value = indice;
            document.getElementById('nombre').value = usuario.nombre;
            document.getElementById('apellido').value = usuario.apellido;
            document.getElementById('correo').value = usuario.correo;
            

            document.getElementById('formularioEdicion').style.display = 'block';
        }

        // Guardar los datos editados en localStorage
        function guardarUsuario() {
            const indice = document.getElementById('indiceUsuario').value;
            const nombre = document.getElementById('nombre').value;
            const apellido = document.getElementById('apellido').value;
            const correo = document.getElementById('correo').value;
           

            const usuariosJSON = localStorage.getItem('usuariosGuardados');
            const usuarios = usuariosJSON ? JSON.parse(usuariosJSON) : [];

            usuarios[indice] = { nombre, apellido, correo};

            localStorage.setItem('usuariosGuardados', JSON.stringify(usuarios));

            document.getElementById('formularioEdicion').style.display = 'none';

            cargarUsuarios();
        }

        // Cargar los usuarios al iniciar la página
        window.onload = cargarUsuarios;
    </script>
</body>
</html>
