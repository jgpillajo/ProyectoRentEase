<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Propiedad</title>
    <link rel="stylesheet" href="/Styles/styles.css">
</head>
<body>
    <div id="mensaje"></div>

    <div class="contenedor">
        <img class="logo-m" src="/img/logo.svg" alt="logo rentease">
        <br>
        <div class="bien-form">
            <h1>Nuevo Inmueble Rentable</h1>
            <br>
    <form action="">
        <label class="letra" for="">Ciudad:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Ciudad" placeholder="Ingrese una ciudad"minlength="2" maxlength="10" autofocus required /> <br><br>
        <label class="letra" for="">Dirección:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Direccion" placeholder="Ingrese dirección" minlength="2" maxlength="10"/><br><br>
        <label class="letra" for="">Numeración domiciliaria:</label><br>
        <input class="inputs-medidas inputs" type="text" id="NumeracionBien" placeholder="Ingrese el número del bien" minlength="2" maxlength="10"/><br><br>
        <label class="letra" for="">Área Total:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Area" placeholder="Ingrese el área" minlength="2" maxlength="10"/><br><br>
        <label class="" for="aire"> Dispone de Aire Acondicionado ?</label> <br>
        <input  type="radio" id="Aire" name="aire" value="SI" /> SI
        <input type="radio" id="Aire" name="aire" value="NO" checked="" /> NO <br><br>
        <label class="letra" for="">Año de construcción:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Anio" placeholder="Ingrese el año de construcción"minlength="2" maxlength="10" /><br><br>
        <label class="letra" for="">Precio de arrendamiento:</label><br>
        <input class="inputs-medidas inputs" type="text" id="Precio" placeholder="Ingrese el precio" minlength="2" maxlength="10"/><br><br>
        <label class="letra" for="">Disponibilidad de arriendo:</label><br>
        <input class="inputs-medidas inputs" type="date" name="edad" id="Disponible" required>
        <br>
        <br>
    </form>
    <button class="inputs-medidas inputs" type="submit" onclick="ValidarSoloLetras();ValidadFlat()">Registrar Propiedad</button>

</div>
<script src="/javascript/funcionesflat.js" type="text/javascript"></script>
    <script>
 let ValidadFlat= function(){
    let idRegistro = ['Ciudad', 'Direccion', 'NumeracionBien','Area', 'Aire', 'Anio','Precio','Disponible'];
    for(let item of idRegistro){
                if(!document.getElementById(item).value){
                    alert(`El campo ${item} está vacio, por favor ingresa un dato válido`);
                    return;
                }
            }
        let flat = {
        city: '',
        streetname:'',
        streetnumber: '',
        size:'',
        ac: '',
        year: '',
        price:'',
        date:''
        }

            let city = document.getElementById('Ciudad').value;
            let streetname= document.getElementById('Direccion').value;
            let streetnumber = document.getElementById('NumeracionBien').value;
            let size = document.getElementById('Area').value;
            let ac = document.querySelector('input[name=aire]:checked').value;
            let year= document.getElementById('Anio').value;
            let price = document.getElementById('Precio').value;
            let date= document.getElementById('Disponible').value;
            
            flat = {city, streetname, streetnumber ,size ,ac ,year ,price ,date};
 
            let resultado = RegistrarFlat(flat); 
            if(resultado == "OK")
            {
                alert("Bien reg");
                console.log(resultado);
              //document.location.href = "Login.html";
            }
            else{
                alert(resultado);
            }
            

        }
/*
    var ValidadFlat = function(){
            let ciudad = document.getElementById('Ciudad').value;
            let direccion= document.getElementById('Direccion').value;
            let bienNumero = document.getElementById('BienNumero').value;
            let area = document.getElementById('Area').value;
            let anio = document.getElementById('Anio').value;
            let renta = document.getElementById('Renta').value;
            let disponibilidad = document.getElementById('Disponible').value;
            let aireacondicionado = document.querySelector('input[name=aire]:checked').value;
            
            
            if(ciudad == "" || ciudad == undefined) {
                alert('Ingrese la ciudad donde se encuentra la propiedad');
                return false;
            }
            if(direccion == "" || direccion == undefined) {
                alert('Ingrese la direccion donde se encuentra el bien');
                return false;
            }
            if(bienNumero == "" || bienNumero == undefined) {
                alert('Ingrese el numero del bien');
                return false;
            }
            if(area == "" || area == undefined){
                alert('Ingrese el área del bien');
                return false;
            }
            if( anio== "" || anio == undefined){
                alert('Ingrese el año de contruccion del bien');
                return false;
            }
            if( renta== "" || renta == undefined) {
                alert('Ingrese el valor de renta del bien');
                return false;
            }
            if( disponibilidad== "" || disponibilidad == undefined) {
                alert('Ingrese la disponibilidad del bien');
                return false;
            }
            // Objeto Bienes
            
            var grupoBienes = {
                City: ciudad, 
                StreetName: direccion,
                StreetNumber: bienNumero,
                AreaSize: area,
                HasAC:aireacondicionado,
                YearBuilt: anio,
                RentPrice: renta,
                DateAvailable: disponibilidad,
            }

            let almacenaBien = localStorage.getItem('grupoBienes');
            if(almacenaBien ){
                let arrai = JSON.parse(almacenaBien );
                let bienes = new Set(arrai);
                bienes.add(grupoBienes);
                arrai = [...bienes];
                localStorage.setItem('grupoBienes', JSON.stringify(arrai));
            }
            else{
                let bienes = new Set(); // Conjunto de bienes (flats)
                bienes.add(grupoBienes);
                // const arrai = Array.from(bienes);
                const arrai = [...bienes];
                localStorage.setItem('grupoBienes', JSON.stringify(arrai));
            }

            alert('Propiedad Registrada');
        }
        */
    </script>

</body>
</html>