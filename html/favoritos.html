<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eliminar Elemento de Flats Favoritos</title>
</head>
<body>
    <h1>Flats Favoritos</h1>
    <table border="1" id="tablaFlats">
        <thead>
            <tr>
                <th>Ciudad</th>
                <th>Dirección</th>
                <th>Teléfono</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            <!-- Los datos se llenarán dinámicamente -->
        </tbody>
    </table>

    <script>
        // Función para cargar los datos del localStorage y mostrarlos en la tabla
        function cargarDatos() {
            // Recuperar los datos de localStorage
            const datosJSON = localStorage.getItem('flatsFavoritos');
            const datos = datosJSON ? JSON.parse(datosJSON) : [];

            // Referencia a la tabla
            const tabla = document.getElementById('tablaFlats').getElementsByTagName('tbody')[0];
            tabla.innerHTML = ''; // Limpiar la tabla

            // Llenar la tabla con los datos
            datos.forEach((dato, indice) => {
                const fila = tabla.insertRow();
                fila.insertCell(0).textContent = dato.city;
                fila.insertCell(1).textContent = dato.streetnumber;
                fila.insertCell(2).textContent = dato.streetname;

                // Crear botón de eliminar
                const botonEliminar = document.createElement('button');
                botonEliminar.textContent = 'Eliminar';
                botonEliminar.onclick = () => eliminarFavorito(indice);
                fila.insertCell(3).appendChild(botonEliminar);
            });
        }

        // Función para eliminar un elemento de favoritos y actualizar localStorage
        function eliminarFavorito(indice) {
            // Recuperar los datos de localStorage
            const datosJSON = localStorage.getItem('flatsFavoritos');
            const datos = datosJSON ? JSON.parse(datosJSON) : [];

            // Eliminar el elemento del array
            datos.splice(indice, 1);

            // Guardar los datos actualizados en localStorage
            localStorage.setItem('flatsFavoritos', JSON.stringify(datos));

            alert('Elemento eliminado de favoritos');
            cargarDatos(); // Recargar la tabla
        }

        // Llamar a la función cargarDatos cuando la página se cargue
        window.onload = cargarDatos;
    </script>
</body>
</html>
